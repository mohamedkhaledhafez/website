(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{106:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return u}));var i=n(0),a=n.n(i);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),p=function(e){var t=a.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},b=function(e){var t=p(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=a.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,c=h(e,["components","mdxType","originalType","parentName"]),b=p(n),m=i,u=b["".concat(l,".").concat(m)]||b[m]||s[m]||r;return n?a.a.createElement(u,o(o({ref:t},c),{},{components:n})):a.a.createElement(u,o({ref:t},c))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=m;var o={};for(var h in t)hasOwnProperty.call(t,h)&&(o[h]=t[h]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var c=2;c<r;c++)l[c]=n[c];return a.a.createElement.apply(null,l)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},96:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return h})),n.d(t,"default",(function(){return p}));var i=n(2),a=n(6),r=(n(0),n(106)),l={id:"trapping-rain-water",title:"Trapping Rain Water"},o={unversionedId:"trapping-rain-water",id:"trapping-rain-water",isDocsHomePage:!1,title:"Trapping Rain Water",description:"Trapping Rain Water",source:"@site/docs/42.trapping-rain-water.md",slug:"/trapping-rain-water",permalink:"/docs/trapping-rain-water",editUrl:"https://github.com/techfellows/website/edit/master/website/docs/docs/42.trapping-rain-water.md",version:"current",sidebar:"algorithmsAndDataStructuresSidebar",previous:{title:"Add Two Numbers",permalink:"/docs/add-two-numbers"},next:{title:"Maximum Sum Subarray",permalink:"/docs/maximum-sum-subarray"}},h=[{value:"Trapping Rain Water",id:"trapping-rain-water",children:[]},{value:"Problem Description",id:"problem-description",children:[]},{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Two Arrays",id:"two-arrays",children:[{value:"Solution",id:"solution",children:[]},{value:"Key Points",id:"key-points",children:[]},{value:"Code (JavaScript/Python3/C++)",id:"code-javascriptpython3c",children:[]}]},{value:"Two Pointers",id:"two-pointers",children:[{value:"Solution",id:"solution-1",children:[]},{value:"Code (Python3/C++)",id:"code-python3c",children:[]}]}],c={rightToc:h};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(r.b)("wrapper",Object(i.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"trapping-rain-water"},"Trapping Rain Water"),Object(r.b)("p",null,Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"https://leetcode.com/problems/trapping-rain-water/description/"}),"https://leetcode.com/problems/trapping-rain-water/description/")),Object(r.b)("h2",{id:"problem-description"},"Problem Description"),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Given n non-negative integers representing an elevation map where the width of each bar is 1, compute how much water it is able to trap after raining.")),Object(r.b)("p",null,Object(r.b)("img",Object(i.a)({parentName:"p"},{src:"https://tva1.sinaimg.cn/large/007S8ZIlly1ghlu2p6pzfj30bg04hmx3.jpg",alt:"42.trapping-rain-water-1"}))),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"The above elevation map is represented by array ","[0,1,0,2,1,0,1,3,2,1,2,1]",". In this case, 6 units of rain water (blue section) are being trapped. Thanks Marcos for contributing this image!")),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{}),"Input: [0,1,0,2,1,0,1,3,2,1,2,1]\nOutput: 6\n")),Object(r.b)("h2",{id:"prerequisites"},"Prerequisites"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Space-time tradeoff"),Object(r.b)("li",{parentName:"ul"},"Two Pointers"),Object(r.b)("li",{parentName:"ul"},"Monotonic Stack")),Object(r.b)("h2",{id:"two-arrays"},"Two Arrays"),Object(r.b)("h3",{id:"solution"},"Solution"),Object(r.b)("p",null,"The difficulty of this problem is ",Object(r.b)("inlineCode",{parentName:"p"},"hard"),".\nWe'd like to compute how much water a given elevation map can trap."),Object(r.b)("p",null,"A brute force solution would be adding up the maximum level of water that each element of the map can trap."),Object(r.b)("p",null,"Pseudo Code:"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-js"}),"for (let i = 0; i < height.length; i++) {\n  area += h[i] - height[i]; // the maximum level of water that the element i can trap\n}\n")),Object(r.b)("p",null,"Now the problem becomes how to calculating h","[i]",", which is in fact the minimum of maximum height of bars on both sides minus height","[i]",":\n",Object(r.b)("inlineCode",{parentName:"p"},"h[i] = Math.min(leftMax, rightMax)")," where ",Object(r.b)("inlineCode",{parentName:"p"},"leftMax = Math.max(leftMax[i-1], height[i])")," and ",Object(r.b)("inlineCode",{parentName:"p"},"rightMax = Math.max(rightMax[i+1], height[i])"),"."),Object(r.b)("p",null,"For the given example, h would be ","[0, 1, 1, 2, 2, 2 ,2, 3, 2, 2, 2, 1]","."),Object(r.b)("p",null,"The key is to calculate ",Object(r.b)("inlineCode",{parentName:"p"},"leftMax")," and ",Object(r.b)("inlineCode",{parentName:"p"},"rightMax"),"."),Object(r.b)("h3",{id:"key-points"},"Key Points"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Figure out the modeling of ",Object(r.b)("inlineCode",{parentName:"li"},"h[i] = Math.min(leftMax, rightMax)"))),Object(r.b)("h3",{id:"code-javascriptpython3c"},"Code (JavaScript/Python3/C++)"),Object(r.b)("p",null,"JavaScript Code:"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-js"}),"/*\n * @lc app=leetcode id=42 lang=javascript\n *\n * [42] Trapping Rain Water\n *\n */\n/**\n * @param {number[]} height\n * @return {number}\n */\nvar trap = function (height) {\n  let max = 0;\n  let volume = 0;\n  const leftMax = [];\n  const rightMax = [];\n\n  for (let i = 0; i < height.length; i++) {\n    leftMax[i] = max = Math.max(height[i], max);\n  }\n\n  max = 0;\n\n  for (let i = height.length - 1; i >= 0; i--) {\n    rightMax[i] = max = Math.max(height[i], max);\n  }\n\n  for (let i = 0; i < height.length; i++) {\n    volume = volume + Math.min(leftMax[i], rightMax[i]) - height[i];\n  }\n\n  return volume;\n};\n")),Object(r.b)("p",null,"Python Code:"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-python"}),"class Solution:\n    def trap(self, heights: List[int]) -> int:\n        n = len(heights)\n        l, r = [0] * (n + 1), [0] * (n + 1)\n        ans = 0\n        for i in range(1, len(heights) + 1):\n            l[i] = max(l[i - 1], heights[i - 1])\n        for i in range(len(heights) - 1, 0, -1):\n            r[i] = max(r[i + 1], heights[i])\n        for i in range(len(heights)):\n            ans += max(0, min(l[i + 1], r[i]) - heights[i])\n        return ans\n")),Object(r.b)("p",null,"C++ code:"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-c++"}),"int trap(vector<int>& heights)\n{\n    if(heights == null)\n        return 0;\n    int ans = 0;\n    int size = heights.size();\n    vector<int> left_max(size), right_max(size);\n    left_max[0] = heights[0];\n    for (int i = 1; i < size; i++) {\n        left_max[i] = max(heights[i], left_max[i - 1]);\n    }\n    right_max[size - 1] = heights[size - 1];\n    for (int i = size - 2; i >= 0; i--) {\n        right_max[i] = max(heights[i], right_max[i + 1]);\n    }\n    for (int i = 1; i < size - 1; i++) {\n        ans += min(left_max[i], right_max[i]) - heights[i];\n    }\n    return ans;\n}\n\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Complexity Analysis")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Time Complexity: $O(N)$"),Object(r.b)("li",{parentName:"ul"},"Space Complexity: $O(N)$")),Object(r.b)("h2",{id:"two-pointers"},"Two Pointers"),Object(r.b)("h3",{id:"solution-1"},"Solution"),Object(r.b)("p",null,"The above code is easy to understand, but it needs the extra space of N. We can tell from it that we in fact only cares about the minimum of (left","[i]",", right","[i]","). Specifically:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"If l","[i + 1]"," < r","[i]",", the maximum in the left side of i will determine the height of trapping water."),Object(r.b)("li",{parentName:"ul"},"If l","[i + 1]"," >= r","[i]",", the maximum in the right side of i will determine the height of trapping water.")),Object(r.b)("p",null,"Thus, we don't need to keep two complete arrays. We can rather keep only a left max and a right max, using constant variable. This problem is a typical two pointers problem."),Object(r.b)("p",null,"Algorithm:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Initialize two pointers ",Object(r.b)("inlineCode",{parentName:"li"},"left")," and ",Object(r.b)("inlineCode",{parentName:"li"},"right"),", pointing to the begin and the end of our height array respectively."),Object(r.b)("li",{parentName:"ol"},"Initialize the left maximum height and the right maximum height to be 0."),Object(r.b)("li",{parentName:"ol"},"Compare height","[left]"," and height","[right]")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"If height","[left]"," < height","[right]",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"3.1.1 If height","[left]"," >= left_max, the current trapping volume is (left_max - height","[left]",")"),Object(r.b)("li",{parentName:"ul"},"3.1.2 Otherwise, no water is trapped and the volume is 0"))),Object(r.b)("li",{parentName:"ul"},"3.2 Iterate the left pointer to the right"),Object(r.b)("li",{parentName:"ul"},"3.3 If height","[left]"," >= height","[right]",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"3.3.1 If height","[right]"," >= right_max, the current trapping volume is (right_max - height","[right]",")"),Object(r.b)("li",{parentName:"ul"},"3.3.2 Otherwise, no water is trapped and the volume is 0"))),Object(r.b)("li",{parentName:"ul"},"3.4 Iterate the right pointer to the left")),Object(r.b)("h3",{id:"code-python3c"},"Code (Python3/C++)"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-python"}),"class Solution:\n    def trap(self, heights: List[int]) -> int:\n        n = len(heights)\n        l_max = r_max = 0\n        l, r = 0, n - 1\n        ans = 0\n        while l < r:\n            if heights[l] < heights[r]:\n                if heights[l] < l_max:\n                    ans += l_max - heights[l]\n                else:\n                    l_max = heights[l]\n                l += 1\n            else:\n                if heights[r] < r_max:\n                    ans += r_max - heights[r]\n                else:\n                    r_max = heights[r]\n                r -= 1\n        return ans\n")),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-c++"}),"\nclass Solution {\npublic:\n    int trap(vector<int>& heights)\n{\n    int left = 0, right = heights.size() - 1;\n    int ans = 0;\n    int left_max = 0, right_max = 0;\n    while (left < right) {\n        if (heights[left] < heights[right]) {\n            heights[left] >= left_max ? (left_max = heights[left]) : ans += (left_max - heights[left]);\n            ++left;\n        }\n        else {\n            heights[right] >= right_max ? (right_max = heights[right]) : ans += (right_max - heights[right]);\n            --right;\n        }\n    }\n    return ans;\n}\n\n};\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Complexity Analysis")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Time Complexity: $O(N)$"),Object(r.b)("li",{parentName:"ul"},"Space Complexity: $O(1)$")))}p.isMDXComponent=!0}}]);